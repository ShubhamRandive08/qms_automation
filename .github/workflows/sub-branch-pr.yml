# name : Sub Branch PR and Push

# on : 
#     schedule :
#         - cron :  '0 9 * * 0'
#     push : 
#         branches : [Qms-Pranav, Qms-Shubham]
#     pull_request :
#         branches : [Qms-Pranav, Qms-Shubham]
#     workflow_dispatch :

# jobs :
#     run-sub-branch :
#         runs-on : ubuntu-latest

#         steps : 
#         #1 Checkout Code
#          - name : Checkout code
#            uses : actions/checkout@v4

#         # 2. Set up node
#          - name : Set up node
#            uses : actions/setup-node@v4
#            with :
#              node-version : '18'
#              cache : 'npm'

#         # 3. install dependencies
#          - name : Install dependencies
#            run : npm ci

#         # 4. Install playwright
#          - name : Install playwright
#            run : npx playwright install --with-deps chromium

#         # 5. Run testcases.
#          - name : Run Tests 
#            run : npm run test



name: Run On Sub brach Push Or Raise PR

on:
  schedule: 
    - cron: '0 9 * * 0'

  push:
    branches: [Qms-Shubham, Qms-Pranav]
  pull_request:
    branches: [Qms-Shubham, Qms-Pranav]

  workflow_dispatch:

jobs:
  #Phase 1 : Checkout code
  checkout_code:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

  # Phase 2 : Build and run test
  build:
    needs: checkout_code
    runs-on: ubuntu-latest
    steps:
        # Setup node
      - name: Set up node
        uses: actions/setup-node@v4
        with:
          node-version: '18'
          cache: npm

      # Install dependancies
      - name: Install Dependancies
        run: npm ci

      # Install Playwright
      - name: Install playwright
        run: npx playwright install --with-deps chromium
        

  run-test:
    needs: build
    runs-on: ubuntu-latest
    steps:
      - name: Run tests
        run: npm run test









# name: CI/CD Pipeline

# on: [push]

# jobs:
#   # PHASE 1: Quality Checks (Run in parallel)
#   lint:
#     runs-on: ubuntu-latest
#     steps:
#       - name: Check code style
#         run: npm run lint
  
#   security-scan:
#     runs-on: ubuntu-latest
#     steps:
#       - name: Security audit
#         run: npm audit
  
#   # PHASE 2: Build & Test (After quality checks)
#   build:
#     needs: [lint, security-scan]
#     runs-on: ubuntu-latest
#     steps:
#       - name: Build app
#         run: npm run build
#       - name: Upload build
#         uses: actions/upload-artifact@v4
  
#   unit-test:
#     needs: build
#     runs-on: ubuntu-latest
#     steps:
#       - name: Run tests
#         run: npm test
  
#   e2e-test:
#     needs: build
#     runs-on: ubuntu-latest
#     steps:
#       - name: Run E2E tests
#         run: npm run test:e2e
  
#   # PHASE 3: Deploy (After all tests pass)
#   deploy-staging:
#     needs: [unit-test, e2e-test]
#     if: github.ref == 'main'
#     runs-on: ubuntu-latest
#     steps:
#       - name: Deploy to staging
#         run: ./deploy-staging.sh
  
#   deploy-production:
#     needs: deploy-staging
#     if: github.ref == 'main'
#     runs-on: ubuntu-latest
#     steps:
#       - name: Deploy to production
#         run: ./deploy-production.sh
